var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i};define(["require","exports","namespace","backbone","marionette","jquery","underscore","knockout"],function(n,t){var f=n("knockout"),o=n("namespace"),s=n("backbone"),i=n("marionette"),r=n("jquery"),h=n("underscore"),u=o.app,c,e,l;(function(n){var u=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initialize=function(n){n.viewModel!==undefined&&(this.viewModel=n.viewModel)},t.prototype.onShow=function(){this.viewModel.parentView=this,f.applyBindings(this.viewModel,this.el)},t.prototype.onClose=function(){f.cleanNode(r(this.el)[0])},t}(i.ItemView),t;n.MvvmView=u,t=function(n){function t(t){this.tagName=r(this.template).attr("tagName"),(this.tagName==null||this.tagName=="")&&(this.tagName=r(this.template)[0].nodeName),this.className=r(this.template).attr("class"),n.call(this,t)}return __extends(t,n),t}(i.ItemView),n.ItemView=t})(t.Views||(t.Views={})),c=t.Views,e=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.beforeRoute=function(){},t.prototype.before=function(){var t="",n;return(u.GL.GetLoginToken&&(t=u.GL.GetLoginToken()),n=location.hash.replace("#",""),t=="")?(this.navigate("/Security/Login/"+n,!0),!1):(this.UpdateModel(n.split("/")[0]),this.beforeRoute)?this.beforeRoute(n):!0},t.prototype.UpdateModel=function(n){if(u.Security.UserModules!=null){var i=u.Security.UserModules,t=i.where({ModName:n});t.length>=1&&t[0].set("IsSelected",!0)}},t}(s.SubRoute),t.ModuleRouter=e,function(n){var f=function(n){function t(){this.el="#modal",n.call(this)}return __extends(t,n),t.prototype.initialize=function(){this.on("show",this.showModal,this)},t.prototype.getEl=function(n){var t=r(n);t.on("hidden",this.close);return t},t.prototype.showModal=function(n){n.on("close",this.hideModal,this);var t=this.$el.parent().parent().parent();t.modal("show");t.on("hidden.bs.modal",function(){return n.close()})},t.prototype.hideModal=function(){this.$el.parent().parent().parent().modal("hide")},t.prototype.onClose=function(){this.off("show",this.showModal)},t}(i.Region),t,u;n.ModalRegion=f,t=function(n){function t(){n.apply(this,arguments),this.transitionEvent="transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"}return __extends(t,n),t.prototype.addBaseAnimate=function(n){n.$el.css({"-moz-transition":"margin-left .25s, margin-right .25s","-webkit-transition":"margin-left .25s, margin-right .25s","-o-transition":"margin-left .25s, margin-right .25s","-ms-transition":"margin-left .25s, margin-right .25s",transition:"margin-left .25s, margin-right .25s"})},t.prototype.addTransitionInit=function(n,t){var i={"margin-left":t.$el.width()*-1+"px","margin-right":t.$el.width()*1+"px"};n.$el.css(i)},t.prototype.removeTransitionInit=function(n){n.$el.css({"margin-left":"","margin-right":""})},t.prototype.addTransitionIn=function(n){n.$el.css({"margin-left":"0px","margin-right":"0px"})},t.prototype.removeTransitionIn=function(n){n.$el.css({"margin-left":"","margin-right":""})},t.prototype.addTransitionOut=function(n){var t={"margin-left":n.$el.parent().width()*1+"px","margin-right":n.$el.parent().width()*-1+"px"};n.$el.css(t)},t.prototype.removeTransitionOut=function(n){n.$el.css({"margin-left":"","margin-right":""})},t.prototype.show=function(n){var t=this;this.ensureEl(),this.$el.length===0?setTimeout(function(){return t.show(n)},50):this.delegatedshow(n)},t.prototype.delegatedshow=function(n){var t=this,u,r;this.ensureEl(),u=n.isClosed||h.isUndefined(n.$el)||this.currentView==undefined,r=n!==this.currentView,r&&this.promiseClose(n).done(function(){t.addBaseAnimate(n),t.addTransitionInit(n,self),n.render(),(r||u)&&t.open(n),t.currentView=n;n.$el.on(t.transitionEvent,function(){n.$el.off(t.transitionEvent),t.removeTransitionInit(n)});setTimeout(function(){return t.addTransitionIn(n)},1),i.triggerMethod.call(t,"show",n),i.triggerMethod.call(n,"show")})},t.prototype.promiseClose=function(){var i=this,t=r.Deferred(),n;if(!this.currentView||this.currentView.isClosed)return t.resolve(),t.promise();n=this.currentView;n.$el.on(this.transitionEvent,function(){n.$el.off(i.transitionEvent),i.removeTransitionOut(n),i.close(),t.resolve()});return this.removeTransitionIn(n),this.addTransitionOut(n),this.isTransitionSupported()||(this.removeTransitionOut(n),this.close(),t.resolve()),t.promise()},t.prototype.closeView=function(){this.promiseClose()},t.prototype.isTransitionSupported=function(){var n;return n=document.documentElement.style,n.webkitTransition!==undefined||n.MozTransition!==undefined||n.OTransition!==undefined||n.MsTransition!==undefined||n.transition!==undefined},t}(i.Region),n.TransitionRegion=t,u=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initialize=function(){},t.prototype.addBaseAnimate=function(n){n.$el.addClass("baseAnimation")},t.prototype.addTransitionInit=function(n){n.$el.addClass("loaded")},t.prototype.removeTransitionInit=function(n){n.$el.removeClass("loaded")},t.prototype.addTransitionIn=function(n){n.$el.addClass("ondisplay")},t.prototype.removeTransitionIn=function(n){n.$el.removeClass("ondisplay")},t.prototype.addTransitionOut=function(n){n.$el.addClass("unloaded")},t.prototype.removeTransitionOut=function(n){n.$el.removeClass("unloaded")},t}(t),n.SubTransitionRegion=u}(t.Regions||(t.Regions={})),l=t.Regions})