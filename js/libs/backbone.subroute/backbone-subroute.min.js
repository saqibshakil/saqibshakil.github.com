(function(n){typeof define=="function"&&define.amd?define(["underscore","backbone"],n):n(_,Backbone)})(function(n,t){return t.SubRoute=t.Router.extend({constructor:function(i,r){this.prefix=i=i||"",this.separator=i.slice(-1)==="/"?"":"/",this.createTrailingSlashRoutes=r&&r.createTrailingSlashRoutes,t.Router.prototype.constructor.call(this,r);var u;u=t.history.fragment?t.history.getFragment():t.history.getHash(),n.every(this.routes,function(n,i){return u.match(t.Router.prototype._routeToRegExp(i))?(t.history.loadUrl(u),!1):!0},this),this.postInitialize&&this.postInitialize(r)},navigate:function(n,i){n.substr(0,1)!="/"&&n.indexOf(this.prefix.substr(0,this.prefix.length-1))!==0&&(n=this.prefix+(n?this.separator:"")+n),t.Router.prototype.navigate.call(this,n,i)},route:function(n,i,r){n.substr(0)==="/"&&(n=n.substr(1,n.length));var u=this.prefix;return n&&n.length>0&&(u+=this.separator+n),this.createTrailingSlashRoutes&&(this.routes[u+"/"]=i,t.Router.prototype.route.call(this,u+"/",i,r)),this.routes[u]=i,t.Router.prototype.route.call(this,u,i,r)}}),t.SubRoute});
//@ sourceMappingURL=backbone-subroute.min.js.map