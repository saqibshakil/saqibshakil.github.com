var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i};define(["require","exports","../../js/libs/GL/GL","./Views","./Models","./Data","namespace","backbone","namespace","marionette","underscore"],function(n,t,i,r,u,f){var v=n("namespace"),b=n("backbone"),k=n("marionette"),y=n("jquery"),d=n("underscore"),o=i,s=r,h=u,e=f,c=v.app,p=c.module("BookAtHome"),w=window.cordova!=undefined?"http://saqibshakil.github.io/facilities.js?":"/facilities.js?",l=function(n){function t(t){this.Controller=new a,this.routes={"*actions":"home"},n.call(this,t)}return __extends(t,n),t.prototype.beforeRoute=function(){return this.Controller.InitializeLayout(),!0},t}(o.ModuleRouter),a;t.Router=l,a=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.InitializeLayout=function(){if(this.Layout===undefined||this.Layout.isClosed!=!1){this.Layout=new s.MainView,c.content.show(this.Layout);var n;try{localStorage.getItem("Facilities")!=undefined&&(n=JSON.parse(localStorage.getItem("Facilities")))}catch(t){n=e.Facilities}e.Facilities=n}},t.prototype.home=function(){var n=this;y.getJSON(w+Math.random()*1e3).done(function(t){n.Items=new h.Facilities(t.Facilities),localStorage.setItem("Facilities",JSON.stringify(t.Facilities))}).fail(function(){n.Items=new h.Facilities(e.Facilities)}).always(function(){var t=new s.GridView({collection:n.Items});n.Layout.detail.show(t)})},t}(o.Controller),p.Router=l})